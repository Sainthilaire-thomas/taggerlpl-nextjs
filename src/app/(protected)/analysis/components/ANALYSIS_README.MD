# ğŸ·ï¸ TaggerLPL - Framework de MÃ©triques Modulaires

## ğŸ“‹ Vue d'ensemble du Framework

TaggerLPL implÃ©mente un **framework unifiÃ© de mÃ©triques modulaires** pour l'analyse conversationnelle et linguistique interactionnelle. L'architecture permet la comparaison scientifique d'algorithmes multiples sur les mÃªmes donnÃ©es, avec validation croisÃ©e AC-LI-Cognitif.

### ğŸ¯ Objectifs du Framework

- âœ… **Architecture modulaire** : Indicateurs comparables et algorithmes interchangeables
- âœ… **Validation scientifique** : MÃ©triques de performance, annotation experte, convergence
- âœ… **Interface comparative** : Visualisation cÃ´te-Ã -cÃ´te des rÃ©sultats d'algorithmes
- ğŸ”„ **Machine Learning supervisÃ©** : EntraÃ®nement de modÃ¨les avec annotations expertes
- ğŸ”„ **Validation croisÃ©e** : Tests de convergence AC-LI-Cognitif automatisÃ©s

## ğŸ—ï¸ Architecture du Framework

### Structure gÃ©nÃ©rale

```
src/app/(protected)/analysis/components/
â”œâ”€â”€ ğŸ“‚ metrics-framework/       # ğŸ”§ FRAMEWORK COMMUN (Ã  implÃ©menter)
â”œâ”€â”€ ğŸ“‚ li-metrics/             # ğŸ—£ï¸ LINGUISTIQUE INTERACTIONNELLE
â”œâ”€â”€ ğŸ“‚ cognitive-metrics/      # ğŸ§  SCIENCES COGNITIVES
â””â”€â”€ ğŸ“‚ shared/                 # ğŸ”— COMPOSANTS PARTAGÃ‰S
```

### Framework de mÃ©triques modulaires (PlanifiÃ©)

```
metrics-framework/                      # ğŸ”§ FRAMEWORK COMMUN
â”œâ”€â”€ ğŸ“‚ core/
â”‚   â”œâ”€â”€ MetricsRegistry.ts              # Registre universel d'indicateurs
â”‚   â”œâ”€â”€ BaseIndicator.ts                # Classe de base pour tous indicateurs
â”‚   â”œâ”€â”€ AlgorithmStrategy.ts            # Interface stratÃ©gies d'algorithmes
â”‚   â”œâ”€â”€ MetricsEngine.ts                # Moteur de calcul unifiÃ©
â”‚   â”œâ”€â”€ ValidationEngine.ts             # Moteur de validation convergence
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ base.ts                     # Types fondamentaux
â”‚       â”œâ”€â”€ indicators.ts               # Types pour indicateurs
â”‚       â”œâ”€â”€ algorithms.ts               # Types pour algorithmes
â”‚       â”œâ”€â”€ results.ts                  # Types pour rÃ©sultats
â”‚       â””â”€â”€ annotations.ts              # Types pour systÃ¨me d'annotation
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/
â”‚   â”œâ”€â”€ useMetricsEngine.ts             # Hook principal unifiÃ©
â”‚   â”œâ”€â”€ useIndicatorRegistry.ts         # Gestion registre dynamique
â”‚   â”œâ”€â”€ useAlgorithmBenchmarking.ts     # SystÃ¨me de benchmarking
â”‚   â”œâ”€â”€ useAnnotationWorkflow.ts        # Workflow annotation supervisÃ©e
â”‚   â”œâ”€â”€ useConvergenceValidation.ts     # Validation croisÃ©e AC-LI-Cognitif
â”‚   â”œâ”€â”€ useMetricsByFamily.ts           # Analyse par famille de stratÃ©gies
â”‚   â”œâ”€â”€ useMLTraining.ts                # EntraÃ®nement modÃ¨les ML
â”‚   â””â”€â”€ usePerformanceMonitoring.ts     # Monitoring temps rÃ©el
â”‚
â”œâ”€â”€ ğŸ“‚ components/
â”‚   â”œâ”€â”€ MetricIndicatorCard.tsx         # Carte d'indicateur universelle
â”‚   â”œâ”€â”€ AlgorithmComparisonView.tsx     # Comparaison algorithmes ligne par ligne
â”‚   â”œâ”€â”€ AnnotationInterface.tsx         # Interface annotation experte
â”‚   â”œâ”€â”€ BenchmarkDashboard.tsx          # Dashboard performance comparative
â”‚   â”œâ”€â”€ ValidationDashboard.tsx         # Dashboard validation convergence
â”‚   â”œâ”€â”€ ConvergenceVisualization.tsx    # Graphiques convergence
â”‚   â””â”€â”€ MLTrainingInterface.tsx         # Interface entraÃ®nement ML
â””â”€â”€ ğŸ“‚ utils/
    â”œâ”€â”€ dataPreprocessing.ts            # PrÃ©processing donnÃ©es Supabase
    â”œâ”€â”€ featureExtraction.ts            # Extraction features ML
    â”œâ”€â”€ algorithmValidation.ts          # Validation et mÃ©triques qualitÃ©
    â””â”€â”€ mlHelpers.ts                    # Helpers ML/NLP
```

## ğŸ—£ï¸ Domaine LI (Linguistique Interactionnelle)

### Ã‰tat d'implÃ©mentation

```
li-metrics/                             # ğŸ—£ï¸ LINGUISTIQUE INTERACTIONNELLE
â”œâ”€â”€ ğŸ“‚ indicators/
â”‚   â”œâ”€â”€ ğŸ“‚ FeedbackAlignmentIndicator/  # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicAlignmentAlgorithm.ts          # âœ… Analyse sÃ©mantique lexicale
â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationalPatternAlgorithm.ts   # ğŸš€ NOUVEAU (analyse structurelle)
â”‚   â”‚   â”‚   â””â”€â”€ SequentialPatternAlgorithm.ts       # ğŸ”„ Ã€ IMPLÃ‰MENTER (multi-paires)
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useFeedbackAlignmentMetrics.ts      # âœ… Hook complet multi-algorithmes
â”‚   â”‚   â”‚   â””â”€â”€ useFeedbackAlignmentAnnotation.ts   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ FeedbackAlignmentInterface.tsx          # âœ… Interface complÃ¨te comparative
â”‚   â”‚   â””â”€â”€ types.ts                                # âœ… Types complets + extensions CA
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ CommonGroundIndicator/       # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ BackchannelsIndicator/       # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ ProsodicFluencyIndicator/    # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ SpeechRateIndicator/         # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ SequentialPatternsIndicator/ # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â””â”€â”€ ğŸ“‚ RepairMechanismsIndicator/   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ LIMetricsConfig.ts                  # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”œâ”€â”€ LIMetricsRegistry.ts                # ğŸ”„ Ã€ IMPLÃ‰MENTER
â””â”€â”€ LinguisticInteractionalMetrics.tsx  # ğŸ”„ Ã€ IMPLÃ‰MENTER
```

## ğŸ§  Domaine Cognitive (Sciences Cognitives)

### Ã‰tat d'implÃ©mentation

```
cognitive-metrics/                      # ğŸ§  SCIENCES COGNITIVES
â”œâ”€â”€ ğŸ“‚ indicators/
â”‚   â”œâ”€â”€ ğŸ“‚ FluiditeCognitiveIndicator/  # âœ… EXISTANT (Ã  migrer vers framework)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicFluidityAlgorithm.ts       # ğŸ”„ Ã€ MIGRER (existant en hook)
â”‚   â”‚   â”‚   â”œâ”€â”€ NeuronMirrorAlgorithm.ts        # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”‚   â””â”€â”€ MLEnhancedAlgorithm.ts          # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useFluiditeCognitiveMetrics.ts  # ğŸ”„ Ã€ CRÃ‰ER (migration)
â”‚   â”‚   â”‚   â””â”€â”€ useFluidityAnnotation.ts        # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ FluiditeCognitiveInterface.tsx      # ğŸ”„ Ã€ CRÃ‰ER
â”‚   â”‚   â””â”€â”€ types.ts                            # ğŸ”„ Ã€ CRÃ‰ER
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ReactionsDirectesIndicator/  # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicReactionsAlgorithm.ts      # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ ContextualReactionsAlgorithm.ts # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ReprisesLexicalesIndicator/  # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicReprisesAlgorithm.ts       # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ SemanticReprisesAlgorithm.ts    # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ChargeCognitiveIndicator/    # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicChargeAlgorithm.ts         # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ MultiFactorChargeAlgorithm.ts   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ MarqueursEffortIndicator/    # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ PatternsResistanceIndicator/ # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ RobustesseStressIndicator/   # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ NiveauStressIndicator/       # âœ… EXISTANT (Ã  migrer)
â”‚   â””â”€â”€ ğŸ“‚ PositionConversationIndicator/ # âœ… EXISTANT (Ã  migrer)
â”‚
â”œâ”€â”€ CognitiveMetricsConfig.ts           # ğŸ”„ Ã€ CRÃ‰ER
â”œâ”€â”€ CognitiveMetricsRegistry.ts         # ğŸ”„ Ã€ CRÃ‰ER
â”œâ”€â”€ CognitiveMetrics.tsx                # âœ… EXISTANT (Ã  adapter au framework)
â”‚
â””â”€â”€ ğŸ“‚ migration/                       # ğŸ”„ OUTILS DE MIGRATION
    â”œâ”€â”€ adaptUseCognitiveMetrics.ts     # Adaptation hook existant
    â”œâ”€â”€ adaptIndicatorData.ts           # Migration donnÃ©es existantes
    â”œâ”€â”€ compatibilityLayer.ts           # Couche compatibilitÃ©
    â””â”€â”€ migrationGuide.md               # Guide migration step-by-step
```

### ğŸ”„ Ã‰tat actuel des mÃ©triques cognitives

#### **âœ… ImplÃ©mentation existante (hors framework)**

**Localisation actuelle** : `app/(protected)/analysis/components/CognitiveMetrics.tsx`

**Hook existant** : `useCognitiveMetrics.ts`

```typescript
// Structure actuelle (Ã  migrer)
export const useCognitiveMetrics = (data: TaggedTurn[]) => {
  return {
    // Indicateurs existants
    fluiditeCognitive: FluiditeScore,
    reactionsDirectes: ReactionsScore,
    reprisesLexicales: ReprisesScore,
    chargeCognitive: ChargeScore,
    marqueursEffort: EffortScore,
    patternsResistance: ResistanceScore,
    robustesseStress: StressScore,
    niveauStress: StressLevelScore,
    positionConversation: PositionScore,

    // MÃ©triques globales
    scoreGlobalCognitif: number,
    tendancesEvolution: TrendAnalysis,
  };
};
```

#### **ğŸ“Š Indicateurs cognitifs opÃ©rationnels**

1. **âœ… FluiditÃ© Cognitive** - Mesure de la spontanÃ©itÃ© conversationnelle
   - DÃ©tection des hÃ©sitations, pauses, reformulations
   - Score basÃ© sur la fluiditÃ© du discours conseiller
2. **âœ… RÃ©actions Directes** - Vitesse de rÃ©action aux interventions client
   - Temps de latence entre tour client et rÃ©ponse conseiller
   - Analyse de la rÃ©activitÃ© conversationnelle
3. **âœ… Reprises Lexicales** - RÃ©utilisation du vocabulaire client
   - DÃ©tection des mots/expressions repris du client
   - Mesure de l'adaptation linguistique
4. **âœ… Charge Cognitive** - ComplexitÃ© du traitement conversationnel
   - Longueur des tours, complexitÃ© syntaxique
   - Indicateurs de surcharge cognitive
5. **âœ… Marqueurs d'Effort** - Signes de difficultÃ© conversationnelle
   - DÃ©tection "euh", "ben", pauses longues
   - Quantification de l'effort conversationnel
6. **âœ… Patterns de RÃ©sistance** - DÃ©tection des blocages conversationnels
   - RÃ©pÃ©titions, reformulations multiples
   - Patterns de difficultÃ©s rÃ©currentes
7. **âœ… Robustesse au Stress** - Maintien de la performance sous pression
   - StabilitÃ© des mÃ©triques dans contextes difficiles
   - RÃ©silience conversationnelle
8. **âœ… Niveau de Stress** - IntensitÃ© du stress conversationnel
   - Combinaison de marqueurs physiologiques linguistiques
   - Score global de tension
9. **âœ… Position dans la Conversation** - Ã‰volution temporelle des mÃ©triques
   - Tendances dÃ©but/milieu/fin de conversation
   - Patterns d'Ã©volution cognitive

### âœ… FeedbackAlignmentIndicator - Statut Complet avec Nouvelle StratÃ©gie

**Localisation** : `li-metrics/indicators/FeedbackAlignmentIndicator/`

#### **ğŸš€ Innovation Algorithmique : Approche Scientifique Bi-Dimensionnelle**

**RÃ©vision stratÃ©gique** : Abandon de l'approche `SentimentEnhancedAlgorithm` (redondante lexicalement) au profit du `ConversationalPatternAlgorithm` (innovation structurelle).

#### **FonctionnalitÃ©s opÃ©rationnelles** :

**âœ… BasicAlignmentAlgorithm.ts** - Moteur d'analyse sÃ©mantique lexicale

- **Paradigme** : Analyse de sentiment par correspondance lexicale
- **MÃ©thode** : 145 patterns franÃ§ais (POSITIF/NEGATIF/NEUTRE)
- **UnitÃ© d'analyse** : Mots et expressions isolÃ©s
- **Output** : Score de sentiment (-1 Ã  +1) avec confidence
- **Couverture** : 72% des verbatims (1006/1397 analysables)

**ğŸš€ ConversationalPatternAlgorithm.ts** - NOUVEAU : Moteur d'analyse structurelle

- **Paradigme** : Conversation Analysis et paires adjacentes
- **MÃ©thode** : Analyse structurelle des patterns conseillerâ†’client
- **UnitÃ© d'analyse** : Paires adjacentes et cohÃ©rence pragmatique
- **Output** : Types d'alignment (STRONG_AGREEMENT, QUALIFIED_AGREEMENT, etc.)
- **Innovation** : PremiÃ¨re implÃ©mentation computationnelle de la CA

**ğŸ“Š Justification Scientifique** :

- **Fondement thÃ©orique** : Schegloff & Sacks (1973) - Adjacency Pairs
- **Application** : Drew & Heritage (1992) - Professional Interaction
- **DiffÃ©renciation** : Lexical (sentiment) vs Structurel (alignment)
- **ComplÃ©mentaritÃ©** : Deux dimensions d'analyse indÃ©pendantes

#### **ğŸ§  Types d'Analyses Structurelles DÃ©tectÃ©es** :

```typescript
enum AlignmentType {
  STRONG_AGREEMENT = "strong_agreement", // "Exactement !", "C'est Ã§a !"
  QUALIFIED_AGREEMENT = "qualified_agreement", // "Oui mais...", "En partie"
  COOPERATIVE_RESISTANCE = "cooperative_resistance", // "Je ne sais pas si..."
  DISALIGNMENT = "disalignment", // "Non", "Pas du tout"
}

enum PragmaticFunction {
  VALIDATE = "validate", // REFLET â†’ Attente de confirmation
  EXPLORE = "explore", // ENGAGEMENT â†’ Attente d'Ã©laboration
  INFORM = "inform", // EXPLICATION â†’ Attente de comprÃ©hension
  REDIRECT = "redirect", // OUVERTURE â†’ Attente de suivi
}
```

#### **ğŸ” Interface Multi-Algorithmes Enrichie**

**âœ… FeedbackAlignmentInterface.tsx** - Interface comparative complÃ¨te

- **Mode Simple** : Analyse avec un seul algorithme (Basic OU ConversationalPattern)
- **Mode Comparaison** : Analyse cÃ´te-Ã -cÃ´te avec mÃ©triques diffÃ©rentielles
- **SÃ©lecteurs** : Algorithme + Mode d'analyse + Origine
- **Visualisations** : Tableaux comparatifs, mÃ©triques de convergence, recommendations
- **Export** : RÃ©sultats + mÃ©thodologie pour insertion thÃ¨se

#### **ğŸ¯ Hook Multi-Algorithmes**

**âœ… useFeedbackAlignmentMetrics.ts** - Hook enrichi

- **Configuration** : Support multi-algorithmes avec comparaison
- **APIs** : `runSingleAlgorithm()`, `runAlgorithmComparison()`, `generateRecommendations()`
- **Caching** : Optimisations de performance avec invalidation intelligente
- **CompatibilitÃ©** : Interface existante prÃ©servÃ©e + extensions

#### **ğŸ“Š RÃ©sultats Scientifiques ValidÃ©s** :

**BasicAlgorithm (Sentiment Lexical)** :

```
ğŸ“Š EfficacitÃ© par stratÃ©gie (analyse de 1397 tours) :
ğŸ¥‡ OUVERTURE:    48.3% verbatims positifs (175 occurrences)
ğŸ¥ˆ ENGAGEMENT:   34.5% verbatims positifs (182 occurrences)
ğŸ¥‰ REFLET:       18.2% verbatims positifs (444 occurrences)
âŒ EXPLICATION:   1.0% verbatims positifs (596 occurrences)

âœ… HypothÃ¨ses validÃ©es : H1 (ACTION > EXPLICATION), H2 (EXPLICATION inefficace)
```

**ConversationalPattern (Alignment Structurel)** :

```
ğŸ§  Patterns d'alignment dÃ©tectÃ©s :
- STRONG_AGREEMENT: CorrÃ©lation avec satisfaction client Ã©levÃ©e
- QUALIFIED_AGREEMENT: Pattern dominant pour stratÃ©gies REFLET
- COOPERATIVE_RESISTANCE: Signal d'optimisation nÃ©cessaire
- DISALIGNMENT: PrÃ©dicateur d'Ã©chec conversationnel

ğŸ¯ CohÃ©rence Pragmatique :
- VALIDATE (REFLET) â†’ Confirmation attendue vs reÃ§ue
- EXPLORE (ENGAGEMENT) â†’ Ã‰laboration attendue vs reÃ§ue
- INFORM (EXPLICATION) â†’ ComprÃ©hension attendue vs reÃ§ue
```

#### **ğŸ”„ Comparaison Algorithmique** :

| Dimension        | BasicAlgorithm          | ConversationalPattern      |
| ---------------- | ----------------------- | -------------------------- |
| **Paradigme**    | Sentiment Analysis      | Conversation Analysis      |
| **MÃ©thode**      | Correspondance lexicale | Analyse structurelle       |
| **Mesure**       | PolaritÃ© Ã©motionnelle   | CohÃ©rence pragmatique      |
| **PrÃ©dictif**    | Sentiment futur         | EfficacitÃ© stratÃ©gique     |
| **Optimisation** | Lexique positif         | Patterns conversationnels  |
| **Innovation**   | Ã‰tabli                  | PremiÃ¨re implÃ©mentation CA |

#### **ğŸš€ Prochaines Ã‰tapes (PrioritÃ© ImmÃ©diate)** :

1. **ConversationalPatternAlgorithm.ts** - ImplÃ©mentation complÃ¨te
   - Types d'alignment et marqueurs structurels
   - CohÃ©rence pragmatique par famille de stratÃ©gies
   - MÃ©triques de validation avec BasicAlgorithm
2. **Interface Comparative** - Mode comparaison opÃ©rationnel
   - Vue cÃ´te-Ã -cÃ´te Sentiment vs Alignment
   - MÃ©triques de convergence et divergence
   - Recommandations d'optimisation conversationnelle
3. **Export ThÃ¨se** - Documentation scientifique
   - Tableaux LaTeX de comparaison algorithmique
   - Graphiques de performance diffÃ©rentielle
   - Justification mÃ©thodologique (CA vs Sentiment Analysis)

## ğŸ”— Composants PartagÃ©s

### Ã‰tat d'implÃ©mentation

```
shared/                                 # ğŸ”— COMPOSANTS PARTAGÃ‰S
â”œâ”€â”€ ğŸ“‚ atoms/                          # âš›ï¸ COMPOSANTS ATOMIQUES
â”‚   â”œâ”€â”€ IndicatorHeader.tsx            # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ ColorLegend.tsx                # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ AlgorithmDetailDialog.tsx      # âœ… IMPLÃ‰MENTÃ‰
â”‚   â””â”€â”€ [autres atoms...]              # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ ğŸ“‚ molecules/                      # ğŸ§¬ COMPOSANTS MOLÃ‰CULAIRES
â”‚   â”œâ”€â”€ ResultsTable.tsx               # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ AlgorithmLogicExplanation.tsx  # âœ… IMPLÃ‰MENTÃ‰ (avec lexiques)
â”‚   â”œâ”€â”€ AlgorithmComparisonView.tsx    # ğŸš€ NOUVEAU (comparaison algorithmes)
â”‚   â”œâ”€â”€ types.ts                       # âœ… ExtendedAlgorithmLogicProps
â”‚   â””â”€â”€ [autres molecules...]          # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/                          # ğŸª HOOKS PARTAGÃ‰S
â”‚   â”œâ”€â”€ useAlgorithmDialog.ts          # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ useAlgorithmComparison.ts      # ğŸš€ NOUVEAU (comparaison multi-algo)
â”‚   â””â”€â”€ [autres hooks...]              # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â””â”€â”€ ğŸ“‚ utils/                          # ğŸ› ï¸ UTILITAIRES PARTAGÃ‰S
    â”œâ”€â”€ conversationAnalysisHelpers.ts # ğŸš€ NOUVEAU (utilitaires CA)
    â””â”€â”€ [utils...]                     # ğŸ”„ Ã€ IMPLÃ‰MENTER
```

#### **âœ… AlgorithmLogicExplanation** - Composant enrichi

**FonctionnalitÃ©s opÃ©rationnelles** :

- Interface multicouche pour affichage des lexiques
- Dialog "Vue dÃ©taillÃ©e" avec scrolling optimisÃ©
- Cartes interactives par sentiment avec animations
- Support types Ã©tendus (`ExtendedAlgorithmLogicProps`)
- Composants factorisÃ©s (`LexiconCategory`, `DetailedLexicon`)

#### **ğŸš€ AlgorithmComparisonView** - Nouveau composant

**FonctionnalitÃ©s planifiÃ©es** :

- Comparaison cÃ´te-Ã -cÃ´te des rÃ©sultats algorithmiques
- MÃ©triques de convergence et divergence
- Visualisations des diffÃ©rences structurelles
- Recommandations d'optimisation

## ğŸ“Š Centre d'Analyse

### Page principale

**Localisation** : `app/(protected)/analysis/page.tsx`

```typescript
// Structure actuelle enrichie
export default function AnalysisPage() {
  return (
    <AnalysisLayout>
      <Box sx={{ display: "flex", flexDirection: "column", gap: 3 }}>
        {/* âœ… Onglet Feedback Alignment - OPÃ‰RATIONNEL MULTI-ALGORITHMES */}
        <FeedbackAlignmentInterface
          selectedOrigin={selectedOrigin}
          showDetailedResults={true}
          showComparison={true} // ğŸš€ NOUVEAU : Mode comparaison activÃ©
          initialAlgorithm="basic" // ou "conversational-pattern"
        />
        {/* ğŸ”„ Onglets Ã  implÃ©menter */}
        <CommonGroundInterface /> {/* Ã€ IMPLÃ‰MENTER */}
        <BackchannelsInterface /> {/* Ã€ IMPLÃ‰MENTER */}
        <CognitiveMetricsInterface /> {/* Ã€ MIGRER */}
      </Box>
    </AnalysisLayout>
  );
}
```

## ğŸ—„ï¸ Base de DonnÃ©es

### Tables existantes (utilisÃ©es)

```sql
-- âœ… DonnÃ©es conversationnelles (opÃ©rationnelles)
turntagged (
  id INTEGER PRIMARY KEY,
  call_id INTEGER,
  start_time FLOAT,
  end_time FLOAT,
  tag TEXT,                    -- âœ… StratÃ©gie conseiller (analysÃ©e par CA)
  verbatim TEXT,               -- âœ… AnalysÃ© par moteur sÃ©mantique
  next_turn_verbatim TEXT,     -- âœ… Verbatim client (analysÃ© par CA + sentiment)
  next_turn_tag TEXT,
  speaker TEXT                 -- âœ… Distinction conseiller/client pour CA
);

-- âœ… Tags et familles (opÃ©rationnels)
lpltag (
  id INTEGER PRIMARY KEY,
  label TEXT,
  family TEXT,                -- âœ… CLÃ‰ pour analyse par famille + fonctions pragmatiques
  originespeaker TEXT,        -- conseiller/client
  color TEXT,
  description TEXT
);

-- âœ… Appels (opÃ©rationnels)
call (
  callid TEXT PRIMARY KEY,
  filename TEXT,
  filepath TEXT,
  origine TEXT,               -- âœ… Filtre par origine
  duree INTEGER,
  is_tagging_call BOOLEAN,
  preparedfortranscript BOOLEAN
);
```

### ğŸ”„ Tables Framework (Ã  implÃ©menter)

```sql
-- ğŸ”„ SystÃ¨me d'annotation unifiÃ©
CREATE TABLE metric_annotations (
  id SERIAL PRIMARY KEY,
  turn_id INTEGER REFERENCES turntagged(id),
  domain TEXT NOT NULL,              -- 'li' | 'cognitive'
  indicator_id TEXT NOT NULL,        -- 'feedback_alignment', 'common_ground'
  algorithm_id TEXT NOT NULL,        -- 'basic', 'conversational-pattern'
  human_label TEXT NOT NULL,         -- Annotation experte
  algorithm_prediction TEXT,         -- PrÃ©diction algorithme
  algorithm_confidence FLOAT,        -- Confiance (0-1)
  annotator_id TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ğŸ”„ Performance algorithmes
CREATE TABLE algorithm_performance (
  id SERIAL PRIMARY KEY,
  domain TEXT NOT NULL,
  indicator_id TEXT NOT NULL,
  algorithm_id TEXT NOT NULL,        -- 'basic' | 'conversational-pattern'
  accuracy FLOAT,
  precision FLOAT,
  recall FLOAT,
  f1_score FLOAT,
  processing_time_ms INTEGER,
  convergence_rate FLOAT,            -- Taux de convergence avec autres algorithmes
  test_date TIMESTAMP DEFAULT NOW()
);

-- ğŸ”„ Validation croisÃ©e Sentiment-Alignment
CREATE TABLE sentiment_alignment_correlations (
  id SERIAL PRIMARY KEY,
  validation_date TIMESTAMP DEFAULT NOW(),
  pearson_correlation FLOAT,        -- CorrÃ©lation sentiment/alignment
  spearman_correlation FLOAT,       -- CorrÃ©lation rang sentiment/alignment
  agreement_rate FLOAT,             -- Taux d'accord classification
  divergence_patterns TEXT,         -- Patterns de divergence dÃ©tectÃ©s
  recommendations TEXT              -- Recommandations d'usage
);

-- ğŸ”„ Validation croisÃ©e AC-LI-Cognitif
CREATE TABLE convergence_validations (
  id SERIAL PRIMARY KEY,
  validation_date TIMESTAMP DEFAULT NOW(),
  kendall_tau_ac_li FLOAT,
  kendall_tau_ac_cognitive FLOAT,
  kendall_tau_li_cognitive FLOAT,
  overall_consistency FLOAT,
  h1_action_effectiveness_validated BOOLEAN,
  h2_explanation_difficulty_validated BOOLEAN,
  convergence_status TEXT
);
```

## ğŸ¯ Roadmap d'ImplÃ©mentation - RÃ‰VISÃ‰

### ğŸš€ **Phase 1 : ImplÃ©mentation ConversationalPatternAlgorithm (PrioritÃ© IMMÃ‰DIATE)**

#### **1.1 Algorithme d'Analyse Structurelle (2-3 jours)**

```typescript
// Ã€ crÃ©er : ConversationalPatternAlgorithm.ts
class ConversationalPatternAlgorithm extends BasicAlignmentAlgorithm {
  // Analyse des paires adjacentes conseillerâ†’client
  // DÃ©tection des types d'alignment structurel
  // Calcul de cohÃ©rence pragmatique par famille
  // Comparaison avec BasicAlgorithm (sentiment)
}
```

**RÃ©fÃ©rences Scientifiques** :

- Schegloff & Sacks (1973) : Adjacency Pairs Theory
- Pomerantz (1984) : Preference Organization
- Drew & Heritage (1992) : Professional Interaction
- Heritage & Sefi (1992) : Advice Reception

#### **1.2 Interface Comparative Multi-Algorithmes (1-2 jours)**

```typescript
// Ã€ modifier : FeedbackAlignmentInterface.tsx
<AlgorithmComparisonView
  algorithms={["basic", "conversational-pattern"]}
  results={comparisonResults}
  showSideBySide={true}
  showConvergenceMetrics={true}
/>
```

#### **1.3 Documentation Scientifique & Export ThÃ¨se (1-2 jours)**

- GÃ©nÃ©ration automatique de tableaux comparatifs (LaTeX)
- Graphiques de corrÃ©lation Sentiment/Alignment
- Justification mÃ©thodologique CA vs Sentiment Analysis
- MÃ©triques de validation scientifique

### ğŸ”„ **Phase 2 : Framework Core (1-2 semaines)**

#### **2.1 Architecture de base**

```typescript
// Ã€ crÃ©er : metrics-framework/core/
- BaseIndicator.ts           # Classe abstraite
- AlgorithmStrategy.ts       # Interface algorithmes
- MetricsEngine.ts          # Moteur unifiÃ©
- types/ (base, indicators, algorithms, results)
```

#### **2.2 Registry pattern**

```typescript
// Ã€ crÃ©er : MetricsRegistry.ts
class MetricsRegistry {
  registerIndicator(indicator: BaseIndicator): void;
  getIndicator(id: string): BaseIndicator;
  getAlgorithms(indicatorId: string): AlgorithmStrategy[];
  runComparison(indicatorId: string, algorithms: string[]): ComparisonResult;
}
```

#### **2.3 Hook principal unifiÃ©**

```typescript
// Ã€ crÃ©er : useMetricsEngine.ts
export const useMetricsEngine = (config: MetricsEngineConfig) => {
  return {
    indicators: BaseIndicator[],
    results: Record<string, IndicatorResult>,
    compareAlgorithms: (algorithms: string[]) => Promise<AlgorithmComparison>,
    runBenchmark: (testData: AnnotatedData[]) => Promise<BenchmarkResults>
  };
};
```

### ğŸ”„ **Phase 3 : Migration MÃ©triques Cognitives (1-2 semaines)**

#### **3.1 Migration FluiditeCognitiveIndicator**

```typescript
// Ã‰tape 1 : CrÃ©er structure framework
cognitive-metrics/indicators/FluiditeCognitiveIndicator/
â”œâ”€â”€ algorithms/BasicFluidityAlgorithm.
```
