# ğŸ·ï¸ TaggerLPL - Framework de MÃ©triques Modulaires

## ğŸ“‹ Vue d'ensemble du Framework

TaggerLPL implÃ©mente un **framework unifiÃ© de mÃ©triques modulaires** pour l'analyse conversationnelle et linguistique interactionnelle. L'architecture permet la comparaison scientifique d'algorithmes multiples sur les mÃªmes donnÃ©es, avec validation croisÃ©e AC-LI-Cognitif.

### ğŸ¯ Objectifs du Framework

- âœ… **Architecture modulaire** : Indicateurs comparables et algorithmes interchangeables
- âœ… **Validation scientifique** : MÃ©triques de performance, annotation experte, convergence
- âœ… **Interface comparative** : Visualisation cÃ´te-Ã -cÃ´te des rÃ©sultats d'algorithmes
- ğŸ”„ **Machine Learning supervisÃ©** : EntraÃ®nement de modÃ¨les avec annotations expertes
- ğŸ”„ **Validation croisÃ©e** : Tests de convergence AC-LI-Cognitif automatisÃ©s

## ğŸ—ï¸ Architecture du Framework

### Structure gÃ©nÃ©rale

```
src/app/(protected)/analysis/components/
â”œâ”€â”€ ğŸ“‚ metrics-framework/       # ğŸ”§ FRAMEWORK COMMUN (Ã  implÃ©menter)
â”œâ”€â”€ ğŸ“‚ li-metrics/             # ğŸ—£ï¸ LINGUISTIQUE INTERACTIONNELLE
â”œâ”€â”€ ğŸ“‚ cognitive-metrics/      # ğŸ§  SCIENCES COGNITIVES
â””â”€â”€ ğŸ“‚ shared/                 # ğŸ”— COMPOSANTS PARTAGÃ‰S
```

### Framework de mÃ©triques modulaires (PlanifiÃ©)

```
metrics-framework/                      # ğŸ”§ FRAMEWORK COMMUN
â”œâ”€â”€ ğŸ“‚ core/
â”‚   â”œâ”€â”€ MetricsRegistry.ts              # Registre universel d'indicateurs
â”‚   â”œâ”€â”€ BaseIndicator.ts                # Classe de base pour tous indicateurs
â”‚   â”œâ”€â”€ AlgorithmStrategy.ts            # Interface stratÃ©gies d'algorithmes
â”‚   â”œâ”€â”€ MetricsEngine.ts                # Moteur de calcul unifiÃ©
â”‚   â”œâ”€â”€ ValidationEngine.ts             # Moteur de validation convergence
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ base.ts                     # Types fondamentaux
â”‚       â”œâ”€â”€ indicators.ts               # Types pour indicateurs
â”‚       â”œâ”€â”€ algorithms.ts               # Types pour algorithmes
â”‚       â”œâ”€â”€ results.ts                  # Types pour rÃ©sultats
â”‚       â””â”€â”€ annotations.ts              # Types pour systÃ¨me d'annotation
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/
â”‚   â”œâ”€â”€ useMetricsEngine.ts             # Hook principal unifiÃ©
â”‚   â”œâ”€â”€ useIndicatorRegistry.ts         # Gestion registre dynamique
â”‚   â”œâ”€â”€ useAlgorithmBenchmarking.ts     # SystÃ¨me de benchmarking
â”‚   â”œâ”€â”€ useAnnotationWorkflow.ts        # Workflow annotation supervisÃ©e
â”‚   â”œâ”€â”€ useConvergenceValidation.ts     # Validation croisÃ©e AC-LI-Cognitif
â”‚   â”œâ”€â”€ useMetricsByFamily.ts           # Analyse par famille de stratÃ©gies
â”‚   â”œâ”€â”€ useMLTraining.ts                # EntraÃ®nement modÃ¨les ML
â”‚   â””â”€â”€ usePerformanceMonitoring.ts     # Monitoring temps rÃ©el
â”‚
â”œâ”€â”€ ğŸ“‚ components/
â”‚   â”œâ”€â”€ MetricIndicatorCard.tsx         # Carte d'indicateur universelle
â”‚   â”œâ”€â”€ AlgorithmComparisonView.tsx     # Comparaison algorithmes ligne par ligne
â”‚   â”œâ”€â”€ AnnotationInterface.tsx         # Interface annotation experte
â”‚   â”œâ”€â”€ BenchmarkDashboard.tsx          # Dashboard performance comparative
â”‚   â”œâ”€â”€ ValidationDashboard.tsx         # Dashboard validation convergence
â”‚   â”œâ”€â”€ ConvergenceVisualization.tsx    # Graphiques convergence
â”‚   â””â”€â”€ MLTrainingInterface.tsx         # Interface entraÃ®nement ML
â””â”€â”€ ğŸ“‚ utils/
    â”œâ”€â”€ dataPreprocessing.ts            # PrÃ©processing donnÃ©es Supabase
    â”œâ”€â”€ featureExtraction.ts            # Extraction features ML
    â”œâ”€â”€ algorithmValidation.ts          # Validation et mÃ©triques qualitÃ©
    â””â”€â”€ mlHelpers.ts                    # Helpers ML/NLP
```

## ğŸ—£ï¸ Domaine LI (Linguistique Interactionnelle)

### Ã‰tat d'implÃ©mentation

```
li-metrics/                             # ğŸ—£ï¸ LINGUISTIQUE INTERACTIONNELLE
â”œâ”€â”€ ğŸ“‚ indicators/
â”‚   â”œâ”€â”€ ğŸ“‚ FeedbackAlignmentIndicator/  # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicAlignmentAlgorithm.ts      # âœ… Analyse sÃ©mantique verbatims
â”‚   â”‚   â”‚   â”œâ”€â”€ SentimentEnhancedAlgorithm.ts   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”‚   â””â”€â”€ SequentialPatternAlgorithm.ts   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useFeedbackAlignmentMetrics.ts  # âœ… Hook complet
â”‚   â”‚   â”‚   â””â”€â”€ useFeedbackAlignmentAnnotation.ts # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ FeedbackAlignmentInterface.tsx      # âœ… Interface complÃ¨te
â”‚   â”‚   â””â”€â”€ types.ts                            # âœ… Types complets
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ CommonGroundIndicator/       # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ BackchannelsIndicator/       # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ ProsodicFluencyIndicator/    # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ SpeechRateIndicator/         # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”œâ”€â”€ ğŸ“‚ SequentialPatternsIndicator/ # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â””â”€â”€ ğŸ“‚ RepairMechanismsIndicator/   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ LIMetricsConfig.ts                  # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”œâ”€â”€ LIMetricsRegistry.ts                # ğŸ”„ Ã€ IMPLÃ‰MENTER
â””â”€â”€ LinguisticInteractionalMetrics.tsx  # ğŸ”„ Ã€ IMPLÃ‰MENTER
```

## ğŸ§  Domaine Cognitive (Sciences Cognitives)

### Ã‰tat d'implÃ©mentation

```
cognitive-metrics/                      # ğŸ§  SCIENCES COGNITIVES
â”œâ”€â”€ ğŸ“‚ indicators/
â”‚   â”œâ”€â”€ ğŸ“‚ FluiditeCognitiveIndicator/  # âœ… EXISTANT (Ã  migrer vers framework)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicFluidityAlgorithm.ts       # ğŸ”„ Ã€ MIGRER (existant en hook)
â”‚   â”‚   â”‚   â”œâ”€â”€ NeuronMirrorAlgorithm.ts        # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”‚   â””â”€â”€ MLEnhancedAlgorithm.ts          # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useFluiditeCognitiveMetrics.ts  # ğŸ”„ Ã€ CRÃ‰ER (migration)
â”‚   â”‚   â”‚   â””â”€â”€ useFluidityAnnotation.ts        # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â”œâ”€â”€ FluiditeCognitiveInterface.tsx      # ğŸ”„ Ã€ CRÃ‰ER
â”‚   â”‚   â””â”€â”€ types.ts                            # ğŸ”„ Ã€ CRÃ‰ER
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ReactionsDirectesIndicator/  # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicReactionsAlgorithm.ts      # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ ContextualReactionsAlgorithm.ts # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ReprisesLexicalesIndicator/  # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicReprisesAlgorithm.ts       # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ SemanticReprisesAlgorithm.ts    # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ChargeCognitiveIndicator/    # âœ… EXISTANT (Ã  migrer)
â”‚   â”‚   â”œâ”€â”€ algorithms/
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicChargeAlgorithm.ts         # ğŸ”„ Ã€ MIGRER
â”‚   â”‚   â”‚   â””â”€â”€ MultiFactorChargeAlgorithm.ts   # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚   â”‚   â””â”€â”€ ... (mÃªme structure)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ MarqueursEffortIndicator/    # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ PatternsResistanceIndicator/ # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ RobustesseStressIndicator/   # âœ… EXISTANT (Ã  migrer)
â”‚   â”œâ”€â”€ ğŸ“‚ NiveauStressIndicator/       # âœ… EXISTANT (Ã  migrer)
â”‚   â””â”€â”€ ğŸ“‚ PositionConversationIndicator/ # âœ… EXISTANT (Ã  migrer)
â”‚
â”œâ”€â”€ CognitiveMetricsConfig.ts           # ğŸ”„ Ã€ CRÃ‰ER
â”œâ”€â”€ CognitiveMetricsRegistry.ts         # ğŸ”„ Ã€ CRÃ‰ER
â”œâ”€â”€ CognitiveMetrics.tsx                # âœ… EXISTANT (Ã  adapter au framework)
â”‚
â””â”€â”€ ğŸ“‚ migration/                       # ğŸ”„ OUTILS DE MIGRATION
    â”œâ”€â”€ adaptUseCognitiveMetrics.ts     # Adaptation hook existant
    â”œâ”€â”€ adaptIndicatorData.ts           # Migration donnÃ©es existantes
    â”œâ”€â”€ compatibilityLayer.ts           # Couche compatibilitÃ©
    â””â”€â”€ migrationGuide.md               # Guide migration step-by-step
```

### ğŸ”„ Ã‰tat actuel des mÃ©triques cognitives

#### **âœ… ImplÃ©mentation existante (hors framework)**

**Localisation actuelle** : `app/(protected)/analysis/components/CognitiveMetrics.tsx`

**Hook existant** : `useCognitiveMetrics.ts`

```typescript
// Structure actuelle (Ã  migrer)
export const useCognitiveMetrics = (data: TaggedTurn[]) => {
  return {
    // Indicateurs existants
    fluiditeCognitive: FluiditeScore,
    reactionsDirectes: ReactionsScore,
    reprisesLexicales: ReprisesScore,
    chargeCognitive: ChargeScore,
    marqueursEffort: EffortScore,
    patternsResistance: ResistanceScore,
    robustesseStress: StressScore,
    niveauStress: StressLevelScore,
    positionConversation: PositionScore,

    // MÃ©triques globales
    scoreGlobalCognitif: number,
    tendancesEvolution: TrendAnalysis,
  };
};
```

#### **ğŸ“Š Indicateurs cognitifs opÃ©rationnels**

1. **âœ… FluiditÃ© Cognitive** - Mesure de la spontanÃ©itÃ© conversationnelle
   - DÃ©tection des hÃ©sitations, pauses, reformulations
   - Score basÃ© sur la fluiditÃ© du discours conseiller
2. **âœ… RÃ©actions Directes** - Vitesse de rÃ©action aux interventions client
   - Temps de latence entre tour client et rÃ©ponse conseiller
   - Analyse de la rÃ©activitÃ© conversationnelle
3. **âœ… Reprises Lexicales** - RÃ©utilisation du vocabulaire client
   - DÃ©tection des mots/expressions repris du client
   - Mesure de l'adaptation linguistique
4. **âœ… Charge Cognitive** - ComplexitÃ© du traitement conversationnel
   - Longueur des tours, complexitÃ© syntaxique
   - Indicateurs de surcharge cognitive
5. **âœ… Marqueurs d'Effort** - Signes de difficultÃ© conversationnelle
   - DÃ©tection "euh", "ben", pauses longues
   - Quantification de l'effort conversationnel
6. **âœ… Patterns de RÃ©sistance** - DÃ©tection des blocages conversationnels
   - RÃ©pÃ©titions, reformulations multiples
   - Patterns de difficultÃ©s rÃ©currentes
7. **âœ… Robustesse au Stress** - Maintien de la performance sous pression
   - StabilitÃ© des mÃ©triques dans contextes difficiles
   - RÃ©silience conversationnelle
8. **âœ… Niveau de Stress** - IntensitÃ© du stress conversationnel
   - Combinaison de marqueurs physiologiques linguistiques
   - Score global de tension
9. **âœ… Position dans la Conversation** - Ã‰volution temporelle des mÃ©triques
   - Tendances dÃ©but/milieu/fin de conversation
   - Patterns d'Ã©volution cognitive

### âœ… FeedbackAlignmentIndicator - Statut Complet

**Localisation** : `li-metrics/indicators/FeedbackAlignmentIndicator/`

#### **FonctionnalitÃ©s opÃ©rationnelles** :

**âœ… BasicAlignmentAlgorithm.ts** - Moteur d'analyse sÃ©mantique

- Lexiques franÃ§ais Ã©tendus (145 patterns : POSITIF/NEGATIF/NEUTRE)
- Analyse des verbatims client avec scoring de confidence
- Recherche des rÃ©actions client (temporelle + next_turn)
- Calcul par familles de stratÃ©gies (REFLET/ENGAGEMENT/EXPLICATION/OUVERTURE)
- Validation qualitÃ© et filtrage des rÃ©sultats

**âœ… FeedbackAlignmentInterface.tsx** - Interface utilisateur

- Affichage des rÃ©sultats par famille avec scores d'efficacitÃ©
- Dialog interactif "Lexiques Complets" avec 145 patterns visibles
- Cartes cliquables par sentiment avec animations
- Export des rÃ©sultats + lexiques
- Interface responsive (Box/Flexbox, compatible MUI)

**âœ… useFeedbackAlignmentMetrics.ts** - Hook de donnÃ©es

- Chargement de tous les turntagged (3652+ enregistrements)
- Pagination Supabase automatique (contournement limite 1000)
- Cache intelligent et optimisations de performance
- Gestion d'erreurs et Ã©tats de chargement
- Filtrage par origine avec diagnostics

#### **RÃ©sultats scientifiques validÃ©s** :

```
ğŸ“Š EfficacitÃ© par stratÃ©gie (analyse de 1397 tours) :
ğŸ¥‡ OUVERTURE:    48.3% verbatims positifs (175 occurrences)
ğŸ¥ˆ ENGAGEMENT:   34.5% verbatims positifs (182 occurrences)
ğŸ¥‰ REFLET:       18.2% verbatims positifs (444 occurrences)
âŒ EXPLICATION:   1.0% verbatims positifs (596 occurrences)

âœ… HypothÃ¨ses validÃ©es : H1 (ACTION > EXPLICATION), H2 (EXPLICATION inefficace)
ğŸ“Š Couverture : 72% (1006/1397 verbatims analysÃ©s)
ğŸ¯ Confidence moyenne : >75%
```

#### **ğŸ”„ Prochaines Ã©tapes FeedbackAlignment** :

1. **SentimentEnhancedAlgorithm.ts** - Algorithme avec NLP avancÃ©
   - IntÃ©gration analyse de sentiment plus sophistiquÃ©e
   - DÃ©tection Ã©motions (joie, frustration, surprise, etc.)
   - Analyse de l'intensitÃ© Ã©motionnelle
   - Comparaison avec BasicAlgorithm
2. **SequentialPatternAlgorithm.ts** - Patterns sÃ©quentiels
   - DÃ©tection de sÃ©quences stratÃ©gie â†’ rÃ©action rÃ©currentes
   - Analyse des enchaÃ®nements optimaux
   - Patterns temporels et contextuels
3. **Interface comparative** - Comparaison d'algorithmes
   - Vue cÃ´te-Ã -cÃ´te des rÃ©sultats Basic vs Enhanced vs Sequential
   - MÃ©triques de performance comparatives
   - Tests A/B automatisÃ©s

## ğŸ”— Composants PartagÃ©s

### Ã‰tat d'implÃ©mentation

```
shared/                                 # ğŸ”— COMPOSANTS PARTAGÃ‰S
â”œâ”€â”€ ğŸ“‚ atoms/                          # âš›ï¸ COMPOSANTS ATOMIQUES
â”‚   â”œâ”€â”€ IndicatorHeader.tsx            # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ ColorLegend.tsx                # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ AlgorithmDetailDialog.tsx      # âœ… IMPLÃ‰MENTÃ‰
â”‚   â””â”€â”€ [autres atoms...]              # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ ğŸ“‚ molecules/                      # ğŸ§¬ COMPOSANTS MOLÃ‰CULAIRES
â”‚   â”œâ”€â”€ ResultsTable.tsx               # âœ… IMPLÃ‰MENTÃ‰
â”‚   â”œâ”€â”€ AlgorithmLogicExplanation.tsx  # âœ… IMPLÃ‰MENTÃ‰ (avec lexiques)
â”‚   â”œâ”€â”€ types.ts                       # âœ… ExtendedAlgorithmLogicProps
â”‚   â””â”€â”€ [autres molecules...]          # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/                          # ğŸª HOOKS PARTAGÃ‰S
â”‚   â”œâ”€â”€ useAlgorithmDialog.ts          # âœ… IMPLÃ‰MENTÃ‰
â”‚   â””â”€â”€ [autres hooks...]              # ğŸ”„ Ã€ IMPLÃ‰MENTER
â”‚
â””â”€â”€ ğŸ“‚ utils/                          # ğŸ› ï¸ UTILITAIRES PARTAGÃ‰S
    â””â”€â”€ [utils...]                     # ğŸ”„ Ã€ IMPLÃ‰MENTER
```

#### **âœ… AlgorithmLogicExplanation** - Composant enrichi

**FonctionnalitÃ©s opÃ©rationnelles** :

- Interface multicouche pour affichage des lexiques
- Dialog "Vue dÃ©taillÃ©e" avec scrolling optimisÃ©
- Cartes interactives par sentiment avec animations
- Support types Ã©tendus (`ExtendedAlgorithmLogicProps`)
- Composants factorisÃ©s (`LexiconCategory`, `DetailedLexicon`)

## ğŸ“Š Centre d'Analyse

### Page principale

**Localisation** : `app/(protected)/analysis/page.tsx`

```typescript
// Structure actuelle
export default function AnalysisPage() {
  return (
    <AnalysisLayout>
      <Box sx={{ display: "flex", flexDirection: "column", gap: 3 }}>
        {/* âœ… Onglet Feedback Alignment - OPÃ‰RATIONNEL */}
        <FeedbackAlignmentInterface
          selectedOrigin={selectedOrigin}
          showDetailedResults={true}
          showComparison={false} // ğŸ”„ Ã€ activer avec multi-algorithmes
        />
        {/* ğŸ”„ Onglets Ã  implÃ©menter */}
        <CommonGroundInterface /> {/* Ã€ IMPLÃ‰MENTER */}
        <BackchannelsInterface /> {/* Ã€ IMPLÃ‰MENTER */}
        <CognitiveMetricsInterface /> {/* Ã€ MIGRER */}
      </Box>
    </AnalysisLayout>
  );
}
```

## ğŸ—„ï¸ Base de DonnÃ©es

### Tables existantes (utilisÃ©es)

```sql
-- âœ… DonnÃ©es conversationnelles (opÃ©rationnelles)
turntagged (
  id INTEGER PRIMARY KEY,
  call_id INTEGER,
  start_time FLOAT,
  end_time FLOAT,
  tag TEXT,
  verbatim TEXT,               -- âœ… AnalysÃ© par moteur sÃ©mantique
  next_turn_verbatim TEXT,     -- âœ… Verbatim client analysÃ©
  next_turn_tag TEXT,
  speaker TEXT
);

-- âœ… Tags et familles (opÃ©rationnels)
lpltag (
  id INTEGER PRIMARY KEY,
  label TEXT,
  family TEXT,                -- âœ… CLÃ‰ pour analyse par famille
  originespeaker TEXT,        -- conseiller/client
  color TEXT,
  description TEXT
);

-- âœ… Appels (opÃ©rationnels)
call (
  callid TEXT PRIMARY KEY,
  filename TEXT,
  filepath TEXT,
  origine TEXT,               -- âœ… Filtre par origine
  duree INTEGER,
  is_tagging_call BOOLEAN,
  preparedfortranscript BOOLEAN
);
```

### ğŸ”„ Tables Framework (Ã  implÃ©menter)

```sql
-- ğŸ”„ SystÃ¨me d'annotation unifiÃ©
CREATE TABLE metric_annotations (
  id SERIAL PRIMARY KEY,
  turn_id INTEGER REFERENCES turntagged(id),
  domain TEXT NOT NULL,              -- 'li' | 'cognitive'
  indicator_id TEXT NOT NULL,        -- 'feedback_alignment', 'common_ground'
  human_label TEXT NOT NULL,         -- Annotation experte
  algorithm_prediction TEXT,         -- PrÃ©diction algorithme
  algorithm_confidence FLOAT,        -- Confiance (0-1)
  annotator_id TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ğŸ”„ Performance algorithmes
CREATE TABLE algorithm_performance (
  id SERIAL PRIMARY KEY,
  domain TEXT NOT NULL,
  indicator_id TEXT NOT NULL,
  algorithm_id TEXT NOT NULL,
  accuracy FLOAT,
  precision FLOAT,
  recall FLOAT,
  f1_score FLOAT,
  processing_time_ms INTEGER,
  test_date TIMESTAMP DEFAULT NOW()
);

-- ğŸ”„ Validation croisÃ©e AC-LI-Cognitif
CREATE TABLE convergence_validations (
  id SERIAL PRIMARY KEY,
  validation_date TIMESTAMP DEFAULT NOW(),
  kendall_tau_ac_li FLOAT,
  kendall_tau_ac_cognitive FLOAT,
  kendall_tau_li_cognitive FLOAT,
  overall_consistency FLOAT,
  h1_action_effectiveness_validated BOOLEAN,
  h2_explanation_difficulty_validated BOOLEAN,
  convergence_status TEXT
);
```

## ğŸ¯ Roadmap d'ImplÃ©mentation

### ğŸ”„ **Phase 1 : Extension FeedbackAlignment (PrioritÃ© ImmÃ©diate)**

#### **1.1 DeuxiÃ¨me algorithme (2-3 jours)**

```typescript
// Ã€ crÃ©er : SentimentEnhancedAlgorithm.ts
class SentimentEnhancedAlgorithm extends BasicAlignmentAlgorithm {
  // Extension avec analyse sentiment plus sophistiquÃ©e
  // DÃ©tection Ã©motions granulaires
  // Comparaison directe avec BasicAlgorithm
}
```

#### **1.2 Interface comparative (1-2 jours)**

```typescript
// Ã€ modifier : FeedbackAlignmentInterface.tsx
<AlgorithmComparisonView
  algorithms={["basic", "sentiment-enhanced"]}
  results={comparisonResults}
  showSideBySide={true}
/>
```

#### **1.3 Documentation scientifique (1-2 jours)**

- GÃ©nÃ©ration automatique de tableaux pour thÃ¨se
- Export des rÃ©sultats en format acadÃ©mique
- Graphiques de comparaison algorithmes
- MÃ©triques de validation scientifique

### ğŸ”„ **Phase 2 : Framework Core (1-2 semaines)**

#### **2.1 Architecture de base**

```typescript
// Ã€ crÃ©er : metrics-framework/core/
- BaseIndicator.ts           # Classe abstraite
- AlgorithmStrategy.ts       # Interface algorithmes
- MetricsEngine.ts          # Moteur unifiÃ©
- types/ (base, indicators, algorithms, results)
```

#### **2.2 Registry pattern**

```typescript
// Ã€ crÃ©er : MetricsRegistry.ts
class MetricsRegistry {
  registerIndicator(indicator: BaseIndicator): void;
  getIndicator(id: string): BaseIndicator;
  getAlgorithms(indicatorId: string): AlgorithmStrategy[];
  runComparison(indicatorId: string, algorithms: string[]): ComparisonResult;
}
```

#### **2.3 Hook principal unifiÃ©**

```typescript
// Ã€ crÃ©er : useMetricsEngine.ts
export const useMetricsEngine = (config: MetricsEngineConfig) => {
  return {
    indicators: BaseIndicator[],
    results: Record<string, IndicatorResult>,
    compareAlgorithms: (algorithms: string[]) => Promise<AlgorithmComparison>,
    runBenchmark: (testData: AnnotatedData[]) => Promise<BenchmarkResults>
  };
};
```

### ğŸ”„ **Phase 3 : Migration MÃ©triques Cognitives (1-2 semaines)**

#### **3.1 Migration FluiditeCognitiveIndicator**

```typescript
// Ã‰tape 1 : CrÃ©er structure framework
cognitive-metrics/indicators/FluiditeCognitiveIndicator/
â”œâ”€â”€ algorithms/BasicFluidityAlgorithm.ts     # Migration du hook existant
â”œâ”€â”€ hooks/useFluiditeCognitiveMetrics.ts     # Adaptation au framework
â”œâ”€â”€ FluiditeCognitiveInterface.tsx           # Nouvelle interface
â””â”€â”€ types.ts                                 # Types spÃ©cifiques

// Ã‰tape 2 : Migrer logique existante
class BasicFluidityAlgorithm {
  // Migration depuis useCognitiveMetrics
  calculateFluiditeScore(turns: TaggedTurn[]): FluiditeResult {
    // Logique existante adaptÃ©e
  }
}
```

#### **3.2 Migration des 8 autres indicateurs cognitifs**

- **ReactionsDirectesIndicator** : Temps de latence conversationnelle
- **ReprisesLexicalesIndicator** : RÃ©utilisation vocabulaire client
- **ChargeCognitiveIndicator** : ComplexitÃ© traitement conversationnel
- **MarqueursEffortIndicator** : DÃ©tection signes de difficultÃ©
- **PatternsResistanceIndicator** : Blocages conversationnels
- **RobustesseStressIndicator** : Maintien performance sous pression
- **NiveauStressIndicator** : IntensitÃ© stress conversationnel
- **PositionConversationIndicator** : Ã‰volution temporelle mÃ©triques

#### **3.3 Interface unifiÃ©e CognitiveMetrics**

```typescript
// Adapter CognitiveMetrics.tsx existant au framework
<CognitiveMetricsInterface>
  <IndicatorTabs>
    <Tab
      label="FluiditÃ© Cognitive"
      component={<FluiditeCognitiveInterface />}
    />
    <Tab
      label="RÃ©actions Directes"
      component={<ReactionsDirectesInterface />}
    />
    <Tab
      label="Reprises Lexicales"
      component={<ReprisesLexicalesInterface />}
    />
    {/* ... autres indicateurs */}
  </IndicatorTabs>

  <GlobalCognitiveScore
    indicators={allCognitiveIndicators}
    showTrends={true}
    showComparison={true}
  />
</CognitiveMetricsInterface>
```

### ğŸ”„ **Phase 4 : Nouveaux Indicateurs LI (2-3 semaines)**

#### **4.1 CommonGroundIndicator**

- Algorithme de dÃ©tection rÃ©fÃ©rences partagÃ©es
- Interface d'analyse du terrain commun
- MÃ©triques de cohÃ©sion conversationnelle

#### **4.2 BackchannelsIndicator**

- DÃ©tection des signaux d'Ã©coute (mm-hmm, oui, etc.)
- Analyse de la synchronisation conversationnelle
- Patterns de feedback non-verbal

#### **4.3 SequentialPatternsIndicator**

- Analyse des sÃ©quences turn-by-turn
- DÃ©tection de patterns rÃ©currents
- Optimisation des enchaÃ®nements conversationnels

### ğŸ”„ **Phase 5 : Validation Scientifique (3-4 semaines)**

#### **4.1 SystÃ¨me d'annotation**

- Interface d'annotation experte
- Workflow de validation croisÃ©e
- MÃ©triques inter-annotateur

#### **4.2 Validation croisÃ©e AC-LI-Cognitif**

- Tests de convergence automatisÃ©s
- Dashboard de validation scientifique
- GÃ©nÃ©ration de rapports de recherche

## ğŸ“‹ **Prochaines TÃ¢ches ConcrÃ¨tes**

### **TÃ¢che 1 : DeuxiÃ¨me algorithme FeedbackAlignment (URGENT pour thÃ¨se)**

**Objectif** : CrÃ©er `SentimentEnhancedAlgorithm.ts` pour comparaison scientifique

**Livrables** :

```typescript
// 1. Fichier Ã  crÃ©er
li-metrics/indicators/FeedbackAlignmentIndicator/algorithms/SentimentEnhancedAlgorithm.ts

// 2. MÃ©thodes Ã  implÃ©menter
- analyzeEmotionalIntensity(verbatim: string): EmotionalScore
- detectGranularSentiments(verbatim: string): GranularSentiment[]
- compareWithBaseline(basicResult: AlignmentResult): ComparisonMetrics

// 3. Interface Ã  modifier
FeedbackAlignmentInterface.tsx
- Ajouter sÃ©lecteur d'algorithme
- Affichage comparatif des rÃ©sultats
- MÃ©triques de performance diffÃ©rentielle
```

### **TÃ¢che 2 : Export documentation thÃ¨se (URGENT)**

**Objectif** : GÃ©nÃ©rer tableaux et graphiques pour insertion dans thÃ¨se

**Livrables** :

```typescript
// 1. Hook d'export Ã  crÃ©er
useThesisExport.ts
- generateResultsTable(): AcademicTable
- generateComparisonChart(): ChartConfig
- generateMethodologyDescription(): LatexContent
- exportToPDF(): Buffer

// 2. Formats de sortie
- Tableaux LaTeX formatÃ©s
- Graphiques haute rÃ©solution (SVG/PNG)
- Descriptions mÃ©thodologiques
- MÃ©triques de validation
```

### **TÃ¢che 3 : Migration premiÃ¨re mÃ©trique cognitive (PRIORITÃ‰ MOYENNE)**

**Objectif** : Migrer FluiditeCognitiveIndicator vers le framework

**Livrables** :

```typescript
// 1. Structure Ã  crÃ©er
cognitive-metrics/indicators/FluiditeCognitiveIndicator/
â”œâ”€â”€ algorithms/BasicFluidityAlgorithm.ts
â”œâ”€â”€ hooks/useFluiditeCognitiveMetrics.ts
â”œâ”€â”€ FluiditeCognitiveInterface.tsx
â””â”€â”€ types.ts

// 2. Migration de la logique existante
// Depuis : useCognitiveMetrics.ts (hook actuel)
// Vers : BasicFluidityAlgorithm.ts (algorithme framework)

// 3. Adaptation de l'interface
// Depuis : CognitiveMetrics.tsx (composant monolithique)
// Vers : FluiditeCognitiveInterface.tsx (composant modulaire)
```

### **TÃ¢che 4 : Tests de validation (IMPORTANT)**

**Objectif** : Valider la robustesse des algorithmes

**Livrables** :

```typescript
// 1. Tests automatisÃ©s
algorithms/__tests__/
- BasicAlignmentAlgorithm.test.ts
- SentimentEnhancedAlgorithm.test.ts
- ComparisonValidation.test.ts

// 2. MÃ©triques de qualitÃ©
- PrÃ©cision sur Ã©chantillon annotÃ©
- Temps de traitement benchmark
- StabilitÃ© inter-exÃ©cutions
- Couverture d'analyse
```

## ğŸ”§ **Setup pour Nouvelle Session**

### **Contexte projet**

- **Framework** : Architecture modulaire pour mÃ©triques comparables
- **Ã‰tat actuel** : FeedbackAlignment opÃ©rationnel avec BasicAlgorithm
- **DonnÃ©es** : 3652+ enregistrements turntagged, 145 patterns linguistiques
- **RÃ©sultats** : HypothÃ¨ses H1 & H2 validÃ©es scientifiquement

### **Fichiers clÃ©s Ã  examiner**

```bash
# Structure existante
src/app/(protected)/analysis/components/
â”œâ”€â”€ li-metrics/indicators/FeedbackAlignmentIndicator/
â”‚   â”œâ”€â”€ algorithms/BasicAlignmentAlgorithm.ts        # âœ… Moteur sÃ©mantique
â”‚   â”œâ”€â”€ FeedbackAlignmentInterface.tsx               # âœ… Interface complÃ¨te
â”‚   â”œâ”€â”€ hooks/useFeedbackAlignmentMetrics.ts         # âœ… Hook donnÃ©es
â”‚   â””â”€â”€ types.ts                                     # âœ… Types
â”œâ”€â”€ shared/molecules/
â”‚   â”œâ”€â”€ AlgorithmLogicExplanation.tsx                # âœ… Composant enrichi
â”‚   â””â”€â”€ types.ts                                     # âœ… ExtendedAlgorithmLogicProps
â”œâ”€â”€ shared/atoms/                                    # âœ… Composants atomiques
â””â”€â”€ CognitiveMetrics.tsx                             # âœ… MÃ©triques cognitives existantes

# Hook cognitif existant (Ã  migrer)
src/hooks/useCognitiveMetrics.ts                     # âœ… 9 indicateurs opÃ©rationnels
```

### **APIs disponibles**

```typescript
// Hook principal FeedbackAlignment
const {
  tableRows, // DonnÃ©es formatÃ©es pour affichage
  analysisResults, // RÃ©sultats par famille + sentiment
  stats, // Statistiques globales
  runAnalysis, // Lance analyse complÃ¨te
  debugInfo, // Diagnostics + mÃ©tadonnÃ©es
} = useFeedbackAlignmentMetrics({ selectedOrigin, algorithmType: "basic" });

// Algorithme d'analyse
const algorithm = new BasicAlignmentAlgorithm(turnTaggedData);
const results = algorithm.analyzeAlignment(); // Retourne AlignmentAnalysis
algorithm.diagnoseVerbatims(); // Diagnostics qualitÃ© donnÃ©es

// Hook cognitif existant (Ã  migrer vers framework)
const {
  fluiditeCognitive, // Score fluiditÃ© conversationnelle
  reactionsDirectes, // Temps de latence rÃ©actions
  reprisesLexicales, // RÃ©utilisation vocabulaire client
  chargeCognitive, // ComplexitÃ© traitement
  marqueursEffort, // Signes de difficultÃ© ("euh", pauses)
  patternsResistance, // Blocages conversationnels
  robustesseStress, // Maintien performance sous pression
  niveauStress, // IntensitÃ© stress conversationnel
  positionConversation, // Ã‰volution temporelle
  scoreGlobalCognitif, // Score composite
} = useCognitiveMetrics(turnTaggedData);
```

### **DonnÃ©es de test**

- **Source** : Table `turntagged` (3652 enregistrements)
- **Filtrage** : Par origine, famille de stratÃ©gie
- **Couverture** : 72% des tours analysables (1006/1397)
- **QualitÃ©** : Confidence moyenne >75%

Le framework est prÃªt pour extension avec nouveaux algorithmes et indicateurs ! ğŸš€
